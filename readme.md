# Scientific Calculator

This project is a Java-based scientific calculator. It's built using Apache Ant, a Java library and command-line tool that helps in driving processes described in build files as targets and extension points dependent upon each other. The calculator is designed to provide a user-friendly interface that allows users to perform a wide range of mathematical operations.

## Code Overview

The main class `calculator_app` extends `javax.swing.JFrame`, indicating that this is a Swing-based GUI application. Swing is a part of Java Foundation Classes (JFC) that is used to create window-based applications. It is built on the top of AWT (Abstract Windowing Toolkit) API and entirely written in java. This makes it platform-independent and lightweight.

### Variables

The class also contains several boolean flags and integer counters, such as `empty_flag`, `opr_flag`, `end_flag`, `func_flag`, `end_bracket`, `decimal_flag`, `bracket_flag`, and `func_count`. These are used to manage the state of the calculator and to track various aspects of the parsing and evaluation process. 
- `num`: This variable is used to store the current number that the user has input or the result of a calculation. It's a double-precision floating-point number, which allows it to hold very large (or small) numbers with a high degree of precision.

- `txt`: This is a `String` variable that holds the current text displayed on the calculator's screen. It could be a number, an expression, or a message to the user.

- `draft`: This `String` variable is used to store a draft of the current expression. It's used when the user is in the middle of typing an expression and hasn't yet hit the equals button to calculate the result.

- `opr`: This is a `HashMap` that maps `Character` keys to `Integer` values. It's used to represent the precedence of different operators in mathematical expressions. For example, the character '=' might be mapped to the integer 0, indicating that '=' is considered an operator with the lowest precedence.

- `operations`: This is a `Stack` of `Stack<Character>` objects. It's used to store the operators in the current expression. The use of a stack of stacks allows the calculator to handle nested expressions correctly.

- `operands`: This is a `Stack` of `Stack<Double>` objects. It's used to store the numerical operands in the current expression. Like `operations`, the use of a stack of stacks allows the calculator to handle nested expressions.

- `empty_flag`: This boolean flag is used to indicate whether the current expression is empty. It's likely set to `true` when the calculator is cleared or after a calculation is completed.

- `opr_flag`: This boolean flag is used to indicate whether the last character entered was an operator. This could be used to prevent the user from entering two operators in a row.

- `end_flag`: This boolean flag is used to indicate whether the current operation is complete. It's likely set to `true` after the user hits the equals button and the result is calculated.

- `func_flag`: This boolean flag is used to indicate whether a function is being used. It's likely set to `true` when the user starts typing a function name.

- `end_bracket`: This boolean flag is used to indicate whether a closing bracket is expected. It's likely set to `true` when the user types an opening bracket and set to `false` when they type a closing bracket.

### Constructor

The constructor of the `calculator_app` class in the Java project. This constructor is called when an instance of the `calculator_app` class is created. It sets up some initial configurations for the calculator application.

The `opr` HashMap is initialized with several key-value pairs. Each key is a character representing an operator or a special character in a mathematical expression, and each value is an integer representing the precedence of that operator. The precedence determines the order in which operations are performed when evaluating a mathematical expression. For example, in the expression "2 + 3 * 4", the multiplication operation has higher precedence, so it's performed before the addition operation, and the expression evaluates to 14, not 20.

In this case, the '=' and ')' characters have the lowest precedence (0), the '+' and '-' operators have a precedence of 1, the 'x', '÷', and '%' operators have a precedence of 2, the '^' operator has a precedence of 3, and the 'E' character has the highest precedence (4). The 'E' character might be used to represent scientific notation in this context.

Next, two new empty Stack objects are pushed onto the `operations` and `operands` stacks. These stacks are likely used to store the operators and operands in the current mathematical expression as it's being parsed and evaluated.

Finally, the `initComponents()` method is called. This method is typically generated by a GUI builder tool and is used to initialize the components of the GUI, such as buttons, text fields, and panels. It sets up the layout of the GUI and configures the initial state of the components.

### Number Entry Function

The `number_entry(long n)` function in `calculator_app.java` file is used to handle the entry of a number by the user. Here's a breakdown of what each part of the function does:

- `if(empty_flag || opr_flag || func_flag)`: This checks if the calculator is in a state where a new number should be started. This would be the case if the calculator is currently empty (`empty_flag` is true), if the last entry was an operator (`opr_flag` is true), or if a function was just used (`func_flag` is true).

- `num = 0; txt = "";`: If a new number should be started, `num` (the current number) is reset to 0 and `txt` (the current text displayed on the calculator) is cleared.

- `if(end_flag)`: This checks if the last operation has been completed (`end_flag` is true). If it has, the draft of the current expression is cleared, the top stack of operands is cleared, and the text fields are updated to reflect these changes.

- `double x = (num < 0) ? -1 : 1;`: This sets `x` to -1 if the current number is negative and to 1 otherwise. This is used to preserve the sign of the number when adding the new digit.

- `x = (decimal_flag > 0) ? x*Math.pow(10, -1*decimal_flag) : 1*x;`: If a decimal point has been entered (`decimal_flag` is greater than 0), `x` is divided by 10 to the power of `decimal_flag`. This is used to place the new digit at the correct position after the decimal point.

- `num = (decimal_flag > 0) ? num + n*x : num*10 + n*x;`: The new digit `n` is added to `num`. If a decimal point has been entered, `n` is added to `num` as is. Otherwise, `num` is first multiplied by 10 before adding `n`.

- `txt += String.valueOf(n);`: The new digit `n` is added to the end of `txt`.

- `jTextField1.setText(txt);`: The text field is updated to display the new `txt`.

- `empty_flag = false; opr_flag = false; end_flag = false; func_flag = false; end_bracket = false;`: All the flags are reset to indicate that a number is currently being entered.

This function allows the calculator to handle the entry of both integer and decimal numbers, and it correctly handles the precedence of operations and the use of parentheses.

### Operation Entry Function

The `operation_entry(char o)` function `calculator_app.java` file is a complex function that handles the entry of an operator or special character by the user. Here's a breakdown of what each part of the function does:

- The function takes a character `o` as an argument, which represents the operator entered by the user.

- If the entered character is '=' and there are unclosed brackets (`bracket_flag > 0`), it simulates the closing of all open brackets and the pressing of the equals button by calling the `jButton19ActionPerformed` and `jButton1ActionPerformed` methods respectively.

- If the last entry was not an operator or if the last operation has been completed, it parses the current number from the text field and pushes it onto the top stack of operands. It also pushes the entered operator onto the top stack of operations.

- If the entered operator has higher precedence than the operator at the top of the top stack of operations, it's simply pushed onto the stack. Otherwise, it performs all operations on the stack that have equal or higher precedence than the entered operator, and then pushes the entered operator onto the stack.

- If the entered operator is '=', it sets `end_flag` to true, indicating that the current operation has been completed. It also clears the top stack of operations.

- If the last entry was an operator and the entered character is not '=', it replaces the last operator with the entered operator.

- The `jButton1ActionPerformed` and `jButton19ActionPerformed` methods are event handlers for button clicks. The former calls `operation_entry('=')`, which triggers the calculation of the current expression when the equals button is clicked. The latter calls `operation_entry(')')`, which closes the current bracket when the closing bracket button is clicked.

This function allows the calculator to handle the entry of operators and special characters, and it correctly handles the precedence of operations and the use of parentheses. It also updates the text fields to reflect the current state of the calculator.

### Decimal Point Button Function

The `jButton2ActionPerformed` function in `calculator_app.java` file is an event handler that gets called when the decimal point button (".") is clicked in the calculator application. Here's a breakdown of what each part of the function does:

- `if(decimal_flag == -1)`: This checks if a decimal point has not been entered yet for the current number. The `decimal_flag` is set to -1 initially and is incremented each time a digit is entered after the decimal point.

- `if(empty_flag || opr_flag || func_flag)`: This checks if the calculator is in a state where a new number should be started. This would be the case if the calculator is currently empty (`empty_flag` is true), if the last entry was an operator (`opr_flag` is true), or if a function is being used (`func_flag` is true).

- `num = 0; txt = "";`: If a new number should be started, `num` (the current number) is reset to 0 and `txt` (the current text displayed on the calculator) is cleared.

- `if(end_flag)`: This checks if the last operation has been completed (`end_flag` is true). If it has, the draft of the current expression is cleared, the top stack of operands is cleared, and the text fields are updated to reflect these changes.

- `decimal_flag++;`: The `decimal_flag` is incremented to indicate that a decimal point has been entered.

- `txt += ".";`: The decimal point is added to the end of `txt`.

- `jTextField1.setText(txt);`: The text field is updated to display the new `txt`.

- `empty_flag = false; opr_flag = false; end_flag = false; func_flag = false;`: All the flags are reset to indicate that a number is currently being entered.

This function allows the calculator to handle the entry of decimal numbers. It correctly handles the precedence of operations and the use of parentheses, and it updates the text fields to reflect the current state of the calculator.

### Negative Sign Button Function

The `jButton4ActionPerformed` function in `calculator_app.java` file is an event handler that gets called when the negative sign button ("+/-") is clicked in the calculator application. Here's a breakdown of what each part of the function does:

- `if(num > 0)`: This checks if the current number is positive. If it is, the number is negated by multiplying it by -1, a "-" is added to the start of the text displayed on the calculator, and the text field is updated to display the new text. The `opr_flag` is set to false to indicate that the last entry was not an operator.

- `else if(num < 0)`: This checks if the current number is negative. If it is, the number is made positive by multiplying it by -1, the "-" at the start of the text displayed on the calculator is removed, and the text field is updated to display the new text. The `opr_flag` is set to false to indicate that the last entry was not an operator.

This function allows the calculator to handle the entry of negative numbers. It correctly updates the current number and the text fields to reflect the current state of the calculator.

### Factorial Function Button

The `jButton18ActionPerformed` function in `calculator_app.java` file is an event handler that gets called when the factorial button is clicked in calculator application. Here's a breakdown of what each part of the function does:

- `num = factorial(num);`: This line calls the `factorial` function with the current number as an argument. The `factorial` function calculates the factorial of the number and returns it. The result is then assigned back to `num`.

- `txt = "fact("+txt+")";`: This line updates the text displayed on the calculator to show that the factorial of the number has been calculated.

- `jTextField1.setText(String.valueOf(num));`: This line updates the text field to display the new value of `num`.

- `if(end_bracket)`: This checks if a bracket has just been closed. If it has, the function updates the draft of the current expression and the text displayed on the calculator to reflect the calculation of the factorial.

- `func_count++; func_flag = true;`: These lines increment the function count and set the function flag to true, indicating that a function has been used.

- `opr_flag = false; end_bracket = false;`: These lines reset the operator flag and the end bracket flag, indicating that the last entry was not an operator and that a bracket has not just been closed.

- `if(end_flag)`: This checks if the function call came after a finished expression (where '=' was pressed). If it has, the function clears the draft for the current expression, clears the top stack of operands, and updates the text fields to reflect these changes.

This function allows the calculator to handle the calculation of factorials. It correctly updates the current number, the draft of the current expression, and the text fields to reflect the current state of the calculator.

All other Functions (**reciprocal**, **sqr**, **sqrt**, **10^**, **abs**, **log**, *ln**, ...) follow the same pattern.

### Open Bracket Button Function

The `jButton20ActionPerformed` function in `calculator_app.java` file is an event handler that gets called when the open bracket button "(" is clicked in your calculator application. Here's a breakdown of what each part of the function does:

- `bracket_flag++;`: This line increments the `bracket_flag`, indicating that an open bracket has been entered.

- `if(opr_flag)`: This checks if the last entry was an operator. If it was, a new stack of operations and a new stack of operands are created, the current number and the text displayed on the calculator are reset, and the draft of the current expression and the text fields are updated to reflect the entry of the open bracket.

- `else`: If the last entry was not an operator, the `operation_entry` function is called with 'x' as an argument to indicate that multiplication should be performed. Then, a new stack of operations and a new stack of operands are created, the current number and the text displayed on the calculator are reset, and the draft of the current expression and the text fields are updated to reflect the entry of the open bracket.

This function allows the calculator to handle the entry of open brackets. It correctly updates the current number, the draft of the current expression, and the text fields to reflect the current state of the calculator. It also correctly handles the precedence of operations and the use of parentheses.

### Closed Bracket Button Function

The `jButton19ActionPerformed` function in `calculator_app.java` file is an event handler that gets called when the closed bracket button ")" is clicked in your calculator application. Here's a breakdown of what each part of the function does:

- `if(bracket_flag > 0)`: This checks if there is an open bracket that has not been closed yet. The `bracket_flag` is incremented each time an open bracket is entered and decremented each time a closed bracket is entered.

- `operation_entry(')')`: This line calls the `operation_entry` function with ')' as an argument. The `operation_entry` function handles the entry of an operator or special character into the calculator. In this case, it handles the entry of a closed bracket.

- `operations.pop(); operands.pop();`: These lines remove the top operation and operand from their respective stacks. This is done because the mathematical expression inside the brackets have been completed.

- `opr_flag = false;`: This line resets the operator flag to indicate that the last entry was not an operator.

- `end_bracket = true;`: This line sets the `end_bracket` flag to true, indicating that a bracket has just been closed.

- `bracket_flag--;`: This line decrements the `bracket_flag`, indicating that a bracket has been closed.

This function allows the calculator to handle the entry of closed brackets. It correctly updates the current number, the draft of the current expression, and the text fields to reflect the current state of the calculator. It also correctly handles the precedence of operations and the use of parentheses.


## Getting Started

### Prerequisites

- Java Development Kit (JDK) 8 or above
- Apache Ant

### Installation

1. Clone the repository to your local machine.
2. Open the project in your preferred Java IDE.
3. Build and run the project using Apache Ant.

## Usage

After running the application, you will see a user-friendly interface. You can perform calculations by clicking the buttons on the calculator. The calculator supports a wide range of mathematical operations, from basic arithmetic to complex scientific calculations. It also supports functions like sine, cosine, and tangent, as well as logarithmic and exponential functions.

## Contributing

Contributions are welcome. Please open an issue first to discuss what you would like to change. Please make sure to update tests as appropriate. We value all our contributors and aim to make the contributing process as smooth as possible.

## License

This project is licensed under the MIT License - see the LICENSE.md file for details. The MIT License is a permissive license that is short and to the point. It lets people do anything they want with your code as long as they provide attribution back to you and don’t hold you liable.

## Acknowledgements

- Java Swing library for providing the GUI components.
- Java Math library for providing the mathematical functions.
- Apache Ant for providing the build tool.

We would like to express our gratitude to the developers of these libraries and tools for making this project possible. Their hard work and dedication have greatly simplified the process of developing this scientific calculator.

## Future Work

I plan to continue improving and expanding the functionality of this scientific calculator. Future updates may include additional mathematical functions like trignometric functions, improved error handling, and enhanced user interface. I welcome feedback and suggestions from users to help guide these improvements.